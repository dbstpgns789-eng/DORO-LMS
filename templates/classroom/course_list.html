{% extends "base.html" %}
{% load static %}

{% block title %}ê°•ì˜ ëª©ë¡ | ë‚´ ê°•ì˜ì‹¤{% endblock %}

{% block extra_css %}
  <link rel="stylesheet" href="{% static 'css/course_list.css' %}">
{% endblock %}

{% block content %}
<div class="classroom-container">

  <aside class="sidebar">
    <div class="sidebar-header">
      <span style="font-size: 24px;">ğŸ‘¤</span>
      <h2>{{ request.user.name }}</h2>
    </div>

    <ul class="sidebar-menu">
      <li><a href="{% url 'classroom:my_classroom' %}">ğŸ“Š ëŒ€ì‹œë³´ë“œ</a></li>
      <li><a href="{% url 'classroom:calendar' %}">ğŸ“… ìº˜ë¦°ë”</a></li>
      <li><a href="{% url 'classroom:course_list' %}" class="active">ğŸ“š ê°•ì˜</a></li>
      <li><a href="{% url 'classroom:enrollment_request' %}">ğŸ“ ë“±ë¡ ì‹ ì²­</a></li>

      {% if request.user.role == "instructor" or request.user.role == "manager" %}
      <li><a href="{% url 'classroom:instructor_room' %}">ğŸ« ê°•ì˜ ì¤€ë¹„ì‹¤</a></li>
      {% endif %}
    </ul>
  </aside>

  <main class="main-content">
    <div style="margin-bottom: 30px;">
      <h1 style="font-size: 24px; font-weight: 600; margin: 0 0 10px 0;">ê°•ì˜ ëª©ë¡</h1>
      <p style="color: #666; margin: 0;">í˜„ì¬ ìˆ˜ê°• ì¤‘ì¸ ê°•ì˜ë¥¼ í™•ì¸í•˜ê³  í•™ìŠµì„ ì‹œì‘í•˜ì„¸ìš”</p>
    </div>

    {% if ongoing_courses %}
    <table class="course-table">
      <thead>
        <tr>
          <th style="width: 60px;">ë²ˆí˜¸</th>
          <th style="width: 120px;">ê°•ì˜ êµ¬ë¶„</th>
          <th>ê°•ì˜ëª…</th>
          <th style="width: 120px;">ê°•ì‚¬ëª…</th>
          <th style="width: 120px;">ìˆ˜ê°• ì‹œì‘ì¼</th>
          <th style="width: 100px;">ì§„ë„ìœ¨</th>
          <th style="width: 150px;">ê´€ë¦¬</th>
        </tr>
      </thead>
      <tbody>
        {% for enrollment in ongoing_courses %}
        <tr>
          <td>{{ forloop.counter }}</td>
          <td>
            <span class="course-tag" style="background: {% cycle '#00BFA5' '#FF6B6B' '#4ECDC4' '#FFD93D' '#6C5CE7' '#A8E6CF' %};">
              ì¼ë°˜
            </span>
          </td>
          <td style="text-align: left; font-weight: 600;">
            <a href="{% url 'classroom:my_course_detail' enrollment.course.course_id %}" style="text-decoration: none; color: #333;">
              {{ enrollment.course.title }}
            </a>
          </td>
          <td>{{ enrollment.course.instructor.name }}</td>
          <td>{{ enrollment.enrolled_at|date:"Y/m/d" }}</td>
          <td>
            <strong style="color: #4650D5;">{{ enrollment.progress }}%</strong>
          </td>
          <td>
            <a href="{% url 'classroom:my_course_detail' enrollment.course.course_id %}" class="btn-enter">ì…ì¥</a>
            <a href="{% url 'classroom:unenroll' enrollment.enrollment_id %}"
               class="btn-cancel"
               onclick="return confirm('ìˆ˜ê°•ì„ ì·¨ì†Œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')">ì·¨ì†Œ</a>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
    {% else %}
    <div class="empty-state-large">
      <p style="font-size: 48px;">ğŸ“š</p>
      <p style="font-size: 16px; color: #999; margin-bottom: 20px;">ìˆ˜ê°• ì¤‘ì¸ ê°•ì˜ê°€ ì—†ìŠµë‹ˆë‹¤</p>
      <a href="{% url 'index' %}" class="btn-enter" style="padding: 12px 30px; font-size: 16px;">
        ê°•ì˜ ë‘˜ëŸ¬ë³´ê¸°
      </a>
    </div>
    {% endif %}

  </main>

</div>
{% endblock %}