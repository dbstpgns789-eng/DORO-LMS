{% extends "base.html" %}
{% load static %}

{% block title %}ê³¼ì œ ì œì¶œ | {{ assignment.title }}{% endblock %}

{% block extra_css %}
<style>
  .submit-wrap {
    max-width: 900px;
    margin: 30px auto 50px;
    padding: 0 20px;
  }
  .submit-card {
    background:#ffffff;
    border:1px solid #e0e0e0;
    border-radius: 10px;
    padding: 28px 26px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.03);
  }
  .submit-header {
    margin-bottom: 20px;
  }
  .submit-title {
    font-size: 22px;
    font-weight: 700;
    margin-bottom: 4px;
  }
  .submit-sub {
    font-size: 14px;
    color:#6c757d;
  }
  .info-box {
    background:#f8f9fa;
    border-radius:8px;
    padding:14px 16px;
    font-size:14px;
    color:#495057;
    margin-bottom: 24px;
  }
  .info-meta {
    display:flex;
    flex-wrap:wrap;
    gap:14px;
    font-size:13px;
    color:#6c757d;
    margin-top:6px;
  }
  .form-group {
    margin-bottom:18px;
  }
  .field-label {
    display:block;
    font-size:14px;
    font-weight:600;
    margin-bottom:6px;
    color:#343a40;
  }
  .field-help {
    font-size:12px;
    color:#868e96;
    margin-top:4px;
  }
  .field-error {
    font-size:12px;
    color:#dc3545;
    margin-top:4px;
  }
  textarea {
    width:100%;
    min-height:150px;
    padding:9px 11px;
    border:1px solid #ced4da;
    border-radius:6px;
    font-size:14px;
    resize:vertical;
    box-sizing:border-box;
  }
  input[type="file"] {
    font-size:14px;
  }
  .current-file {
    margin-top:8px;
    font-size:13px;
    color:#6c757d;
  }
  .submit-actions {
    display:flex;
    justify-content:flex-end;
    gap:10px;
    padding-top:18px;
    border-top:1px solid #e9ecef;
    margin-top:4px;
  }
  .btn-cancel,
  .btn-submit {
    padding:10px 20px;
    border-radius:6px;
    font-size:14px;
    font-weight:500;
    text-decoration:none;
    border:none;
    cursor:pointer;
  }
  .btn-cancel {
    background:#6c757d;
    color:#fff;
  }
  .btn-cancel:hover { background:#5a6268; }
  .btn-submit {
    background:#28a745;
    color:#fff;
  }
  .btn-submit:hover { background:#218838; }
</style>
{% endblock %}

{% block content %}
<section class="hero">
  <div class="hero-inner">
    <h1 class="hero-title">ğŸ“¤ ê³¼ì œ ì œì¶œ</h1>
    <p class="hero-sub">{{ assignment.course.title }}</p>
  </div>
</section>

<main class="submit-wrap">
  <div class="submit-card">

    <!-- ìƒë‹¨ ì œëª© -->
    <div class="submit-header">
      <div class="submit-title">{{ assignment.title }}</div>
      <div class="submit-sub">
        {% if submission %}ì´ë¯¸ ì œì¶œí•œ ê³¼ì œë¥¼ ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.{% else %}ì•„ë˜ ì–‘ì‹ì— ë§ê²Œ ê³¼ì œë¥¼ ì œì¶œí•˜ì„¸ìš”.{% endif %}
      </div>
    </div>

    <!-- ê³¼ì œ ì •ë³´ -->
    <div class="info-box">
      <div>ğŸ“š {{ assignment.course.title }}</div>
      <div class="info-meta">
        <span>ğŸ“… ë§ˆê°: {{ assignment.due_date|date:"Y-m-d H:i" }}</span>
        <span>ğŸ’¯ ë°°ì : {{ assignment.max_score }}ì </span>
      </div>
    </div>

    <!-- ì œì¶œ í¼ -->
    <form method="post" enctype="multipart/form-data">
      {% csrf_token %}

      <!-- í…ìŠ¤íŠ¸ ë‹µë³€ -->
      <div class="form-group">
        <label class="field-label">í…ìŠ¤íŠ¸ ë‹µë³€ (ì„ íƒ)</label>
        {{ form.content }}
        {% if form.content.errors %}
          <div class="field-error">{{ form.content.errors }}</div>
        {% endif %}
        <div class="field-help">
          ê°„ë‹¨í•œ ì„¤ëª…ì´ë‚˜ ì¶”ê°€ ë‚´ìš©ì„ í…ìŠ¤íŠ¸ë¡œ ì‘ì„±í•˜ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©í•˜ì„¸ìš”.
        </div>
      </div>

      <!-- íŒŒì¼ ì—…ë¡œë“œ -->
      <div class="form-group">
        <label class="field-label">íŒŒì¼ ì—…ë¡œë“œ (PDF ë“±)</label>
        {{ form.file }}
        {% if form.file.errors %}
          <div class="field-error">{{ form.file.errors }}</div>
        {% endif %}

        {% if submission and submission.file %}
        <div class="current-file">
          í˜„ì¬ ì œì¶œëœ íŒŒì¼:
          <a href="{{ submission.file.url }}" target="_blank" style="color:#0d6efd;">
            {{ submission.file.name }}
          </a>
        </div>
        {% endif %}

        <div class="field-help">
          PDF, ë¬¸ì„œ, ì´ë¯¸ì§€ ë“± í—ˆìš©ëœ í˜•ì‹ì˜ íŒŒì¼ í•œ ê°œë¥¼ ì—…ë¡œë“œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
        </div>
      </div>

      <!-- ë²„íŠ¼ ì˜ì—­ -->
      <div class="submit-actions">
        <a href="{% url 'classroom:assignment_detail' assignment.assignment_id %}" class="btn-cancel">
          ì·¨ì†Œ
        </a>
        <button type="submit" class="btn-submit">
          {% if submission %}ì¬ì œì¶œí•˜ê¸°{% else %}ì œì¶œí•˜ê¸°{% endif %}
        </button>
      </div>
    </form>

  </div>
</main>
{% endblock %}
