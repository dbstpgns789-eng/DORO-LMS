{% extends "base.html" %}
{% load static %}

{% block title %}{{ content.title }} | {{ course.title }}{% endblock %}

{% block extra_css %}
  <link rel="stylesheet" href="{% static 'css/weekly_content_detail.css' %}">
{% endblock %}

{% block content %}
<section class="hero">
  <div class="hero-inner">
    <h1 class="hero-title">ğŸ“š {{ content.week_number }}ì£¼ì°¨ ìë£Œ</h1>
    <p class="hero-sub">{{ course.title }}</p>
  </div>
</section>

<main class="card-wrap">
  <div class="card-inner">
    <article class="content-article">

      <section class="info-box">
        <div class="info-wrap">
          <div>
            <span class="info-label">ì£¼ì°¨:</span>
            <strong>{{ content.week_number }}ì£¼ì°¨</strong>
          </div>
          {% if content.created_at %}
          <div>
            <span class="info-label">ë“±ë¡ì¼:</span>
            <strong>{{ content.created_at|date:"Y-m-d" }}</strong>
          </div>
          {% endif %}
        </div>
      </section>

      <section class="detail-section">
        <h2 class="detail-title">{{ content.title }}</h2>
        <div class="detail-body">{{ content.description }}</div>
      </section>

      <section class="detail-section">
        <h3 class="resource-title">ìë£Œ ë³´ê¸°</h3>

        {% if content.file %}
        <p class="resource-item">
          ğŸ“„ íŒŒì¼ ìë£Œ:
          <a href="{{ content.file.url }}" class="link-file" target="_blank">
            {{ content.file.name }}
          </a>
        </p>
        {% endif %}

        {% if content.video_url %}
        <p class="resource-item">
          â–¶ï¸ ë™ì˜ìƒ:
          <a href="{{ content.video_url }}" class="link-video" target="_blank">
            {{ content.video_url }}
          </a>
        </p>
        {% endif %}

        {% if not content.file and not content.video_url %}
        <p class="empty-msg">ë“±ë¡ëœ íŒŒì¼ì´ë‚˜ ë™ì˜ìƒ ë§í¬ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
        {% endif %}
      </section>

      <div class="footer-actions">
        <a href="{% url 'classroom:my_course_detail' course.course_id %}" class="btn-back">
          â† ê°•ì˜ì‹¤ë¡œ
        </a>

        {% if request.user == course.instructor or request.user.role == 'manager' %}
        <div class="admin-actions">
          <a href="{% url 'classroom:weekly_update' content.content_id %}" class="btn-edit">
            âœï¸ ìë£Œ ìˆ˜ì •
          </a>
        </div>
        {% endif %}
      </div>

    </article>
  </div>
</main>
{% endblock %}