{% extends "base.html" %}
{% load static %}

{% block title %}{{ content.title }} | {{ course.title }}{% endblock %}

{% block content %}
<section class="hero">
  <div class="hero-inner">
    <h1 class="hero-title">ğŸ“š {{ content.week_number }}ì£¼ì°¨ ìë£Œ</h1>
    <p class="hero-sub">{{ course.title }}</p>
  </div>
</section>

<main class="card-wrap">
  <div class="card-inner">
    <article style="max-width: 900px; margin: 0 auto;">

      <!-- ìƒë‹¨ ì •ë³´ -->
      <section style="background:#f8f9fa; padding:20px; border-radius:8px; margin-bottom:25px;">
        <div style="display:flex; flex-wrap:wrap; gap:20px; font-size:14px;">
          <div>
            <span style="color:#6c757d;">ì£¼ì°¨:</span>
            <strong>{{ content.week_number }}ì£¼ì°¨</strong>
          </div>
          {% if content.created_at %}
          <div>
            <span style="color:#6c757d;">ë“±ë¡ì¼:</span>
            <strong>{{ content.created_at|date:"Y-m-d" }}</strong>
          </div>
          {% endif %}
        </div>
      </section>

      <!-- ì œëª© / ì„¤ëª… -->
      <section style="margin-bottom:30px;">
        <h2 style="font-size:20px; font-weight:600; margin-bottom:12px;">{{ content.title }}</h2>
        <div style="line-height:1.8; white-space:pre-wrap; padding:18px; border:1px solid #dee2e6; border-radius:8px;">
          {{ content.description }}
        </div>
      </section>

      <!-- íŒŒì¼ / ë™ì˜ìƒ ë§í¬ -->
      <section style="margin-bottom:30px;">
        <h3 style="font-size:18px; font-weight:600; margin-bottom:10px;">ìë£Œ ë³´ê¸°</h3>

        {% if content.file %}
        <p style="margin-bottom:10px;">
          ğŸ“„ íŒŒì¼ ìë£Œ:
          <a href="{{ content.file.url }}" style="color:#0d6efd;" target="_blank">
            {{ content.file.name }}
          </a>
        </p>
        {% endif %}

        {% if content.video_url %}
        <p style="margin-bottom:10px;">
          â–¶ï¸ ë™ì˜ìƒ:
          <a href="{{ content.video_url }}" style="color:#dc3545;" target="_blank">
            {{ content.video_url }}
          </a>
        </p>
        {% endif %}

        {% if not content.file and not content.video_url %}
        <p style="color:#6c757d;">ë“±ë¡ëœ íŒŒì¼ì´ë‚˜ ë™ì˜ìƒ ë§í¬ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
        {% endif %}
      </section>

      <!-- í•˜ë‹¨ ë²„íŠ¼ -->
      <div style="padding-top:20px; border-top:1px solid #dee2e6; display:flex; justify-content:space-between; align-items:center;">
        <a href="{% url 'classroom:my_course_detail' course.course_id %}"
           style="display:inline-block; padding:10px 20px; background:#6c757d; color:white; text-decoration:none; border-radius:5px;">
          â† ê°•ì˜ì‹¤ë¡œ
        </a>

        {% if request.user == course.instructor or request.user.role == 'manager' %}
        <div style="display:flex; gap:8px;">
          <a href="{% url 'classroom:weekly_update' content.content_id %}"
             style="padding:8px 14px; background:#0d6efd; color:white; text-decoration:none; border-radius:5px; font-size:13px;">
            âœï¸ ìë£Œ ìˆ˜ì •
          </a>
        </div>
        {% endif %}
      </div>

    </article>
  </div>
</main>
{% endblock %}
