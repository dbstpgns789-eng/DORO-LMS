{% extends "base.html" %}
{% load static %}

{% block title %}ê³¼ì œ ì±„ì  | DORO LMS{% endblock %}

{% block extra_css %}
  <link rel="stylesheet" href="{% static 'css/grade_submission.css' %}">
{% endblock %}

{% block content %}
<section class="hero">
  <div class="hero-inner">
    <h1 class="hero-title">ğŸ“Š ê³¼ì œ ì±„ì </h1>
    <p class="hero-sub">{{ submission.assignment.title }}</p>
  </div>
</section>

<main class="card-wrap">
  <div class="card-inner grade-container">

      <section class="student-info-box">
        <div class="student-header">
          <div>
            <h3 class="student-name">{{ submission.student.name }}</h3>
            <div class="student-meta">
              <span>ğŸ“§ {{ submission.student.email }}</span>
              <span>ğŸ“… ì œì¶œ: {{ submission.submitted_at|date:"Y-m-d H:i" }}</span>
              {% if submission.is_late %}
              <span class="badge-late">â° ì§€ê° ì œì¶œ</span>
              {% endif %}
            </div>
          </div>
        </div>
      </section>

      <section class="submission-section">
        <h2 class="section-title">ğŸ“ ì œì¶œ ë‚´ìš©</h2>
        <div class="submission-content">{{ submission.content }}</div>

        {% if submission.file %}
        <div class="file-attachment">
          <strong>ì²¨ë¶€ íŒŒì¼:</strong>
          <a href="{{ submission.file.url }}" target="_blank" class="file-link">
            ğŸ“ {{ submission.file.name }}
          </a>
        </div>
        {% endif %}
      </section>

      <section class="grade-form-box">
        <h2 class="grade-form-title">âœï¸ ì±„ì í•˜ê¸°</h2>

        <form method="post">
          {% csrf_token %}

          <div class="form-group">
            <label class="form-label">
              ì ìˆ˜ (ë°°ì : {{ submission.assignment.max_score }}ì )
            </label>
            <input type="number" name="score" min="0" max="{{ submission.assignment.max_score }}"
                   value="{% if submission.score %}{{ submission.score }}{% endif %}"
                   class="input-score" required>
          </div>

          <div class="form-group">
            <label class="form-label">í”¼ë“œë°±</label>
            <textarea name="feedback" rows="8" class="textarea-feedback"
                      placeholder="í•™ìƒì—ê²Œ ì „ë‹¬í•  í”¼ë“œë°±ì„ ì‘ì„±í•˜ì„¸ìš”">{% if submission.feedback %}{{ submission.feedback }}{% endif %}</textarea>
          </div>

          <div class="form-actions">
            <a href="{% url 'classroom:submission_list' submission.assignment.assignment_id %}" class="btn-cancel">
              ì·¨ì†Œ
            </a>
            <button type="submit" class="btn-submit">
              ì±„ì  ì™„ë£Œ
            </button>
          </div>
        </form>
      </section>

  </div>
</main>
{% endblock %}