{% extends "base.html" %}
{% load static %}

{% block title %}ê³µì§€ì‚¬í•­ | DORO LMS{% endblock %}

{% block extra_css %}
<style>
  /* =========================================================
     DORO LMS ë””ìì¸ ì‹œìŠ¤í…œ
     ========================================================= */
  :root {
    --brand-blue: #4C5CFF;
    --hero-gradient-start: #4C8DFF;
    --hero-gradient-end: #4C5CFF;
    --text-main: #111827;
    --text-sub: #6B7280;
    --bg-page: #F9FAFB;
    --border-line: #E5E7EB;
    --card-shadow: 0 18px 45px rgba(15,23,42,0.12);
  }

  body { background-color: var(--bg-page); }

  /* 1. íˆì–´ë¡œ ì„¹ì…˜ */
  .hero {
    width: 100%;
    background: linear-gradient(135deg, var(--hero-gradient-start), var(--hero-gradient-end));
    padding: 80px 0 110px;
    color: #fff; /* ê¸°ë³¸ ê¸€ììƒ‰ í°ìƒ‰ */
  }
  .hero__inner {
    max-width: 1120px;
    margin: 0 auto;
    padding: 0 24px;
  }

  /* [ìˆ˜ì •ë¨] íƒ€ì´í‹€ ìƒ‰ìƒ í°ìƒ‰ ê°•ì œ ì ìš© */
  .hero__title {
    font-size: 48px;
    font-weight: 600;
    margin: 0 0 8px;
    line-height: 1.2;
    color: #FFFFFF !important; /* ğŸ‘ˆ ë¬´ì¡°ê±´ í°ìƒ‰ìœ¼ë¡œ ë‚˜ì˜¤ë„ë¡ ì„¤ì • */
  }

  .hero__subtitle {
    font-size: 16px;
    line-height: 1.5;
    color: rgba(255, 255, 255, 0.9); /* ì•½ê°„ íˆ¬ëª…í•œ í°ìƒ‰ */
    margin: 0;
  }

  /* 2. ë©”ì¸ ë ˆì´ì•„ì›ƒ (ì¹´ë“œ) */
  .notice-layout {
    max-width: 1120px;
    margin: 0 auto;
    padding: 0 24px 96px;
    position: relative;
    z-index: 1;
  }

  .notice-card {
    background: #fff;
    border-radius: 16px;
    box-shadow: var(--card-shadow);
    margin-top: -56px;
    overflow: hidden;
    min-height: 600px;
  }

  /* 3. íƒ­ ë©”ë‰´ ì˜ì—­ */
  .tab-header {
    display: flex;
    align-items: center;
    padding: 0 24px;
    border-bottom: 1px solid #F3F4F6;
    background: #fff;
  }

  .tab-item {
    display: flex;
    align-items: center;
    justify-content: center;
    height: 60px;
    margin-right: 24px;
    font-size: 16px;
    font-weight: 500;
    color: var(--text-sub);
    text-decoration: none;
    border-bottom: 2px solid transparent;
    cursor: pointer;
    transition: all 0.2s;
  }

  .tab-item.active {
    color: var(--brand-blue);
    border-bottom-color: var(--brand-blue);
    font-weight: 700;
  }

  /* 4. ë¦¬ìŠ¤íŠ¸ ì•„ì´í…œ */
  .notice-list {
    list-style: none;
    padding: 0;
    margin: 0;
  }

  .notice-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 20px 24px;
    border-bottom: 1px solid var(--border-line);
    transition: background-color 0.1s;
    text-decoration: none;
    color: var(--text-main);
  }

  .notice-item:hover {
    background-color: #F9FAFB;
  }

  .notice-item-left {
    display: flex;
    align-items: center;
    gap: 16px;
  }

  /* 5. ë±ƒì§€ ìŠ¤íƒ€ì¼ */
  .badge {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    min-width: 63px;
    height: 29px;
    border-radius: 20px;
    font-size: 14px;
    font-weight: 500;
    box-sizing: border-box;
    background: #fff;
  }

  .badge--all {
    border: 1px solid #E65D64;
    color: #FF0037;
  }
  .badge--student {
    border: 1px solid #F59E0B;
    color: #D97706;
  }
  .badge--teacher {
    border: 1px solid #4C5CFF;
    color: #4C5CFF;
  }

  .item-title {
    font-size: 16px;
    font-weight: 500;
    color: #111827;
  }

  .item-date {
    font-size: 14px;
    color: #9CA3AF;
    font-weight: 400;
  }

  .empty-state {
    padding: 80px 0;
    text-align: center;
    color: #9CA3AF;
    font-size: 15px;
  }
</style>
{% endblock %}

{% block content %}
<section class="hero">
  <div class="hero__inner">
    <h1 class="hero__title">ê³µì§€ì‚¬í•­</h1>
    <p class="hero__subtitle">
      ê´€ë¦¬ì ê³µì§€ ê´€ë¦¬ í™”ë©´ì…ë‹ˆë‹¤. ê³µì§€/ì ê²€ ìœ í˜•ê³¼ ëŒ€ìƒì„ í•„í„°ë§í•˜ê³  ë“±ë¡ëœ ê³µì§€ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    </p>
  </div>
</section>

<main class="notice-layout">
  <div class="notice-card">

    <div class="tab-header">
      <a href="{% url 'board:notice_list' %}"
         class="tab-item {% if not request.GET.target %}active{% endif %}">
        ì „ì²´
      </a>
      <a href="?target=STUDENT"
         class="tab-item {% if request.GET.target == 'STUDENT' %}active{% endif %}">
        í•™ìƒ
      </a>
      <a href="?target=TEACHER"
         class="tab-item {% if request.GET.target == 'TEACHER' %}active{% endif %}">
        ê°•ì‚¬
      </a>
    </div>

    <ul class="notice-list">
      {% for notice in notices %}
      <li>
        <a href="{% url 'board:notice_detail' notice.notice_id %}" class="notice-item">

          <div class="notice-item-left">
            {% if notice.target == 'ALL' %}
              <span class="badge badge--all">ì „ì²´</span>
            {% elif notice.target == 'STUDENT' %}
              <span class="badge badge--student">í•™ìƒ</span>
            {% elif notice.target == 'TEACHER' %}
              <span class="badge badge--teacher">ê°•ì‚¬</span>
            {% endif %}

            <span class="item-title">
              {{ notice.title }}
              {% if notice.is_pinned %}
                <span style="color: #E9516A; font-size: 12px; margin-left: 4px;">ğŸ“Œ</span>
              {% endif %}
            </span>
          </div>

          <span class="item-date">
            {{ notice.created_at|date:"Y-m-d" }}
          </span>

        </a>
      </li>
      {% empty %}
      <li class="empty-state">
        ë“±ë¡ëœ ê³µì§€ì‚¬í•­ì´ ì—†ìŠµë‹ˆë‹¤.
      </li>
      {% endfor %}
    </ul>

  </div>

  {% if user.is_staff or user.role == 'manager' %}
  <div style="display: flex; justify-content: flex-end; margin-top: 20px;">
    <a href="{% url 'board:notice_create' %}"
       style="background: #4C5CFF; color: white; padding: 10px 20px; border-radius: 8px; text-decoration: none; font-weight: 700; font-size: 14px;">
      ê³µì§€ ë“±ë¡
    </a>
  </div>
  {% endif %}

</main>
{% endblock %}